export default function wxCompose(handles){return function(options,next){const wxThis=this;let index=-1;function dispatch(i){if(i<=index)return Promise.reject(new Error('next() called multiple times'));index=i;let fn=handles[i];if(i===handles.length){fn=next;}if(!fn)return Promise.resolve();try{return fn.call(wxThis,options,dispatch.bind(null,i+1));}catch(err) {return Promise.reject(err);}}return dispatch(0);};};
